---
title: "Yellow Tail GLORY & MOM6"
output: html_notebook
---

```{r packages, message=FALSE, warning=FALSE, include=FALSE}
library(dplyr)
library(ggplot2)
library(tidyverse)
library(here) 
```


```{r clear environment}
rm(list = ls())
```


```{r read in Glory Yellow Tail Data}

Full_Glory_Yellow_Tail.df <- read.csv(
  here("Data", "Yellowtail", "2024Env-annual-yellowtail_GLORYS_UNSTANDARDIZED.csv")
)

head(Full_Glory_Yellow_Tail.df)

```



```{r Bring in MOM6 Data}
Full_MOM6_Yellow_Tail.df <- read.csv(
  here("Data", "Yellowtail", "yellowtail_MOM6.csv"))

head(Full_MOM6_Yellow_Tail.df)
```




```{r Filter GLORY Variables}

Filtered_Glory_Yellow_Tail.df <- Full_Glory_Yellow_Tail.df %>% select(year, Tcop, Tpart, MLDpart, MLDlarv, MLDpjuv, CSTlarv, CSTpjuv, LSTlarv, LSTpjuv)


```



```{r Make GLORY data long}
GYL_datalong <- Filtered_Glory_Yellow_Tail.df %>%
  pivot_longer(
    cols = c( Tcop, Tpart, MLDpart, MLDlarv, MLDpjuv, CSTlarv, CSTpjuv, LSTlarv, LSTpjuv),
    names_to = "variable",
    values_to = "value"
  ) %>%
  mutate(source = "GLORYs")

print(GYL_datalong)

```


```{r Filter MOM6 Variables }

Filtered_MOM6_Yellow_Tail.df <- Full_MOM6_Yellow_Tail.df%>% select(year, Tcop, Tpart, MLDpart, MLDlarv, MLDpjuv,XVlarv, XVpjuv, YVlarv, YVpjuv)

```

```{r Renaming MOM6 Variables to match GLORY Variable Names}

Filtered_MOM6_Yellow_Tail.df <- Filtered_MOM6_Yellow_Tail.df %>%


  rename(
    CSTlarv = XVlarv,
    CSTpjuv = XVpjuv,
    LSTlarv = YVlarv,
    LSTpjuv = YVpjuv
  )

print(Filtered_MOM6_Yellow_Tail.df)
```



```{r Make MOM6 data long}
MOM6YL_datalong <- Filtered_MOM6_Yellow_Tail.df %>%
  pivot_longer(
    cols = c( Tcop, Tpart, MLDpart,MLDlarv, MLDpjuv, CSTlarv, CSTpjuv,LSTlarv, LSTpjuv, LSTlarv, LSTpjuv),
    names_to = "variable",
    values_to = "value"
  ) %>%
  mutate(source = "MOM6")

print(MOM6YL_datalong)
```


```{r Combining Datasets}

combined_models <- rbind(GYL_datalong, MOM6YL_datalong)

head(combined_models)

```


```{r Tcop Plot, echo=FALSE, message=FALSE, warning=FALSE}

combined_models %>%
  filter(variable == "Tcop") %>%
  ggplot(aes(x = year, y = value, color = source)) +
  geom_point() + 
  geom_line() + 
  scale_x_continuous(breaks = seq(min(combined_models$year), max(combined_models$year), by = 5 )) +
  labs(title = "Temporal Comparison of Temperature Cues for Co-Population (Tcop)\nin Northern Yellowtail: GLORYS vs MOM6",
       y = ("Temperature (Â°C)"),
       x = ("Year"),
       color = ("Ocean Model"))

```


```{r Facet Wrap plots, echo=FALSE, message=FALSE, warning=FALSE}

combined_models %>%
  ggplot(aes(x = year, y = value, color = source)) +
  geom_point() + 
  geom_line() + 
  scale_x_continuous(breaks = seq(min(combined_models$year), max(combined_models$year), by = 10 )) +
  facet_wrap(~variable, scales = "free_y")+
labs( color = ("Ocean Model"))


```







